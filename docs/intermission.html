<!-- LTeX: enabled=false -->
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Reveal.js Auto-Advancing Slideshow</title>
        <link rel="stylesheet" href="../dist/reveal.css">
        <link rel="stylesheet" href="../dist/theme/white.css" id="theme">
        <style>
            /* <link rel="stylesheet" href="../dist/reveal.css"> */
            /* <link rel="stylesheet" href="../dist/theme/black.css" id="theme"> */
            body {
                background-color: #00d298;

            }
            table.schedule-table {
                font-size: 12pt;
                width: 100%;
                margin: 0 auto;
                border-collapse: collapse;
                text-decoration: none;
            }
            img.platinum {
                max-width: 10%;
                max-height: 10%;
                padding-left: 5%;
                padding-right: 5%;
            }
            img.gold {
                max-width: 10%;
                max-height: 10%;
                padding-left: 5%;
                padding-right: 5%;
            }
            img.silver {
                max-width: 10%;
                max-height: 10%;
                padding-left: 5%;
                padding-right: 5%;
            }
            img.bronze {
                max-width: 10%;
                max-height: 10%;
                padding-left: 5%;
                padding-right: 5%;
            }
        </style>
    </head>
    <body>
        <script src="../dist/reveal.js"></script>
		<script src="../plugin/notes/notes.js"></script>
		<script src="../plugin/markdown/markdown.js"></script>
		<script src="../plugin/highlight/highlight.js"></script>
        <div class="reveal">
            <div class="slides">
                <section
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%">
                    <h2>Code of Conduct</h2>
                    <p>Be the best version of yourself!</p>
                    <p>See: elbsides.eu/coc/</p>
                    <p>We are here to help:</p>
                    <ul>
                        <li>Florian</li>
                        <li>Lena</li>
                        <li>Dagmar</li>
                    </ul>
                </section>
                <section id="schedule"
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%"
                    >
                </section>
                <section id="platinum-sponsors"
                    data-background-color=white
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%"
                    >
                </section>
                <section id="gold-sponsors"
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%"
                    >
                </section>
                <section id="silver-sponsors"
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%"
                    >
                </section>
                <section id="bronze-sponsors"
                    data-background-image="https://www.elbsides.eu/assets/2025/logos/Elbsides%202025%20strong%20lines%20animated.svg"
                    data-background-position="top right"
                    data-background-size="15%"
                    >
                </section>
            </div>
        </div>
        <script>
            Reveal.initialize({
                transition: 'fade',
                // autoSlide: 5000, // time in ms between slides
                autoSlideStoppable: false, // prevent stopping on user input
                loop: true
            });
        </script>
        <script>
            // Function to format time in HH:MM format
            function formatTime(dateString) {
                const date = new Date(dateString);
                return date.toTimeString().substring(0, 5);
            }

            // Function to create schedule from JSON data
            function createSchedule(data) {
                const days = data.schedule.conference.days;
                let scheduleHTML = '<h2>Schedule Overview</h2>';

                // Create a table for each day
                days.forEach(day => {
                    // scheduleHTML += `<h3>${new Date(day.day_start).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}</h3>`;
                    scheduleHTML += '<table class="schedule-table">';
                    scheduleHTML += '<tr><th>Time</th><th>Speaker</th><th>Title</th></tr>';

                    // Process all rooms/tracks for the day
                    Object.keys(day.rooms).forEach(room => {
                        // Only process events for Elbkuppel room
                        if (room !== "Elbkuppel") {
                            return;
                        }
                        const events = day.rooms[room];
                        let lastTime = null;
                        events.forEach(event => {
                            const startTime = event.start;
                            const start = new Date(event.start);
                            const duration = new Date(event.duration)
                            const [startM, startS] = event.start.split(':').map(Number);
                            const [durM, durS] = event.duration.split(':').map(Number);
                            const totalSeconds = startM * 60 + startS + durM * 60 + durS;
                            const endM = Math.floor(totalSeconds / 60);
                            const endS = totalSeconds % 60;
                            const endTime = `${endM.toString().padStart(2, '0')}:${endS.toString().padStart(2, '0')}`;
                            // console.log(`Start: ${startTime}, Duration: ${event.duration}, End: ${endTime}`);
                            const title = event.title;
                            const persons = event.persons.map(person => person.public_name).join(', ');
                            if (lastTime && lastTime !== startTime) {
                                scheduleHTML += `<tr>
                                    <td>${lastTime}</td>
                                    <td>-</td>
                                    <td>break</td>
                                </tr>`;
                            }
                            scheduleHTML += `<tr>
                                <td>${startTime}</td>
                                <td>${persons}</td>
                                <td>${title}</td>
                            </tr>`;

                            lastTime = endTime;
                        });
                    });
                    scheduleHTML += '</table>';
                });
                document.getElementById('schedule').innerHTML = scheduleHTML;
            }

            // Fetch and process the schedule data
            fetch('https://pretalx.com/elbsides-2025/schedule/export/schedule.json')
                .then(response => response.json())
                .then(data => createSchedule(data))
                .catch(error => {
                    console.error('Error loading schedule:', error);
                    document.getElementById('schedule-content').innerHTML = 'Unable to load schedule data.';
                });
        </script>
        <script>
            const platinum = 'https://raw.githubusercontent.com/Elbsides/www/refs/heads/main/2025/includes/platinum.html';
            const gold = 'https://raw.githubusercontent.com/Elbsides/www/refs/heads/main/2025/includes/gold.html';
            const silver = 'https://raw.githubusercontent.com/Elbsides/www/refs/heads/main/2025/includes/silver.html';
            const bronze = 'https://raw.githubusercontent.com/Elbsides/www/refs/heads/main/2025/includes/bronze.html';

            // const sponsors = [
            //     { title: 'Platinum', url: platinum },
            //     { title: 'Gold', url: gold },
            //     { title: 'Silver', url: silver },
            //     { title: 'Bronze', url: bronze }
            // ];

            // const container = document.getElementById('sponsor-content');

            // Promise.all(
            //     sponsors.map(sponsor =>
            //         fetch(sponsor.url)
            //             .then(response => response.text())
            //             .then(html => ({ title: sponsor.title, html }))
            //     )
            // )
            // .then(results => {
            //     results.forEach(result => {
            //         // Create and append sponsor title element
            //         const titleEl = document.createElement('p');
            //         titleEl.textContent = result.title;
            //         container.appendChild(titleEl);

            //         // Parse and append each image from the sponsor content
            //         const parser = new DOMParser();
            //         const doc = parser.parseFromString(result.html, 'text/html');
            //         const imgs = doc.querySelectorAll('img');

            //         imgs.forEach(img => {
            //             container.appendChild(img);
            //         });
            //     });
            // })
            // .catch(error => console.error('Error loading images:', error));

            function fillSponsorImages(tag, url, title) {
                const container = document.getElementById(tag);
                fetch(url)
                .then(response => response.text())
                .then(html => {
                    const titleEl = document.createElement('h2');
                    titleEl.textContent = title;
                    container.appendChild(titleEl);

                    // Parse and append each image from the sponsor content
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const imgs = doc.querySelectorAll('img');

                    imgs.forEach(img => {
                        img.removeAttribute('id');
                        img.removeAttribute('class');
                        img.style.width = (80 / imgs.length) + '%';
                        img.style.paddingLeft = (10 / imgs.length) + '%';
                        img.style.paddingRight = (10 / imgs.length) + '%';
                        container.appendChild(img);
                    });
                })
                .catch(error => console.error('Error loading images:', error));
            }

            fillSponsorImages('platinum-sponsors', platinum, "Platinum Sponsors");
            fillSponsorImages('gold-sponsors', gold, "Gold Sponsors");
            fillSponsorImages('silver-sponsors', silver, "Silver Sponsors");
            fillSponsorImages('bronze-sponsors', bronze, "Bronze Sponsors");

        </script>

    </body>
</html>
